<app-topnav title="Tages-Bericht"></app-topnav>
<main>
    <div class="main-part">
        <section class="glb-part reward-part bg-white section-100">
            <div class="container">             
                <div class="glb-inner">
                    <h2>Tagesbericht:   {{ reportDay }}</h2>
                    <p><strong>Kundenfrequenz</strong></p>
                    <div class="report-table">
                        <table>
                            <thead>
                                <tr>
                                    <th></th>
                                    <th>Anzahl</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Heutige Kundenfrequenz?</td>
                                    <td style="display:flex; "><input type="number" name="valKundenfrequenz" required class="form-field" [(ngModel)]="rep.valFrequency" placeholder="Menge" style="text-align: right;" (change)="checkIsValid()"/><span class="required">*</span></td>
                                </tr>
                                <tr>
                                    <td>... davon angesprochene Kunden?</td>
                                    <td style="display: flex;"><input type="number" name="valLeads" class="form-field" [(ngModel)]="rep.valLeads" placeholder="Menge" style="text-align: right; " (change)="checkIsValid()"/><span class="required">*</span></td>
                                </tr>
                                <tr>
                                    <td>... davon Verkaufsgespräche?</td>
                                    <td style="display:flex; "><input type="number" name="valTalks"  class="form-field" [(ngModel)]="rep.valTalks" placeholder="Menge" style="text-align: right;" (change)="checkIsValid()"/><span class="required">*</span></td>
                                </tr>
                                <tr>
                                    <td>Ausgegebene Proben</td>
                                    <td style="display:flex;"><input type="number" name="valTester"  class="form-field" [(ngModel)]="rep.valTester" placeholder="Menge" style="text-align: right; " (change)="checkIsValid()"/><span class="required">*</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <p><strong>Ausstattung</strong></p>
                    <div class="report-table">
                        <table>
                            <thead>
                                <tr>
                                    <th></th>
                                    <th>OK</th>
                                    <th >nicht OK</th>
                                    <th>fehlt</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Pop-up Display<span class="required">*</span></td>
                                    <td><input type="radio"  name="display" value="ok" [checked]="getOption('displayOK')" (change)="onChange($event, 'display')"/></td>
                                    <td style="text-align:right;"><input type="radio"  name="display" value="nicht ok"  [checked]="getOption('displayNot')" (change)="onChange($event, 'display')"/></td>
                                    <td style="text-align:right;" ><input type="radio"  name="display" value="fehlt"  [checked]="getOption('displayNone')" (change)="onChange($event, 'display')"/></td>
                                </tr>
                                <tr>
                                    <td>Namensschild<span class="required">*</span></td>
                                    <td><input type="radio" name="nameTag" value="ok"  [checked]="getOption('nameTagOK')" (change)="onChange($event, 'nameTag')" /></td>
                                    <td style="text-align:right;"><input type="radio"  name="nameTag"   [checked]="getOption('nameTagNot')" value="nicht ok" (change)="onChange($event, 'nameTag')" /></td>
                                    <td style="text-align:right;"><input type="radio"  name="nameTag" value="fehlt"  [checked]="getOption('nameTagNone')" (change)="onChange($event, 'nameTag')" /></td>
                                </tr>
                                <tr>
                                    <td>Tester<span class="required">*</span></td>
                                    <td><input type="radio" name="tester"value="ok"  [checked]="getOption('testerOK')" (change)="onChange($event, 'tester')" /></td>
                                    <td style="text-align:right;"><input type="radio"  name="tester"  value="nicht ok"  [checked]="getOption('testerNot')" (change)="onChange($event, 'tester')"/></td>
                                    <td style="text-align:right;"><input type="radio"  name="tester" value="fehlt"  [checked]="getOption('testerNone')" (change)="onChange($event, 'tester')"/></td>
                                </tr>
                                <tr style="height:30px;">
                                    <td colspan="2">Außendienst vor Ort?<span class="required">*</span></td>

                                    <td style="white-space: nowrap; text-align: right;">ja   <input type="radio" name="ASM"  value="yes"  [checked]="getOption('asmYes')" (change)="onChange($event, 'asm')"/></td>
                                    <td style="white-space: nowrap; text-align:right;">nein   <input type="radio" name="ASM" value="no"  [checked]="getOption('asmNo')" (change)="onChange($event, 'asm')"/></td>

                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="glb-inner">
                        <div class="login-inner">
                            <div class="glb-bottom">
                                <div class="glb-form" name="form" method="post" enctype="multipart/form-data" (ngSubmit)="storeImg()">
                                    <div>
                                        <div class="form-field" style="justify-content: flex-end;">
                                            <label for=""  style="margin-top: 5px; white-space: nowrap;"><strong>Tagesumsatz D&G, brutto €</strong></label>
                                            <input type="text" name="txt" [(ngModel)]="rep.revenue" placeholder="Umsatz" style="width: 8em; text-align: right; padding-right: 5px;"><span class="required">*</span>
                                        </div>
                                        <div style="margin-top:-5px;margin-right:0px; font-size:0.7em; float:right;">ohne Sonderzeichen</div>
                                    </div>


                                        <div style="display: flex; justify-content: space-between; align-items: center; width:98%; margin-top: 10px;">
                                            <label for="bus_img">
                                                <img src="assets/camera-active.svg" style="height: 60px;"/>
                                            </label>
                                            <span style="width: 270px;padding-left: 20px;">Foto Verkaufsumsatz, <br> mit Stempel und Unterschrift</span>                                            
                                            <input (change)="uploadFile($event);" type="file" name="bus_img" id="bus_img" accept="image/*;capture=camera"  />
                                            <input type="submit" id="subImg" name="submitImg" style="display: none;">
                                        </div>
                                        <div>{{ rep.filename }}</div>
                                        <div class="alert alert-danger" *ngIf="!isValid && selectedImg && !dataStored">Nicht alle Felder wurden ausgefüllt!</div>
                                        <div class="alert alert-info" *ngIf="dataStored">Der Report wurde versandt.</div>
                                    <div style="margin-top: 10px;">
                                        <div>Wie reagieren die Kunden?</div>
                                        <textarea [(ngModel)]="rep.custReaction" placeholder="max. 300 Zeichen"></textarea>
                                    </div>
                                    <div style="margin-top: 10px;">
                                        <div>Was würdest du ändern?</div>
                                        <textarea [(ngModel)]="rep.requestChanges" placeholder="max. 300 Zeichen"></textarea>
                                    </div>
                                     <label for="subImg" style="text-align:center;">
                                              <img  src="assets/action-save-active.svg" alt="" *ngIf="isValid" style="height:60px;"  data-toggle="modal" data-target="#exampleModal" (click)="doSave()" >
                                              <img  src="assets/action-save.svg" alt="" *ngIf="!isValid" style="height:60px;"  >
                                    </label>
                                    <div class="alert alert-info" *ngIf="dataStored">Der Report wurde versandt.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</main>
<app-footer></app-footer>


<!-- Modal -->
<ng-template #salesModal let-modal>

    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Information</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    
    <div class="modal-body">      
        <div class="alert alert-info">Bitte erfasse erst deine Verkäufe, bevor du den Report versendest!<br>
            Du wirst zu den Verkäufen weitergeleitet.<br>
            Nach der Eingabe kannst du deinen Bericht abschließen und versenden!
        </div>    
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="closeModal()">schließen</button>
    </div>
      
</ng-template>
